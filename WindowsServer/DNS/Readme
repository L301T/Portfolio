Setting Up DNS on Windows Server 2025 in a Virtual Environment
The purpose of this laboratory exercise is to demonstrate the ability to work on a virtual server as if it were a production server. First and foremost, we need to configure the network adapter. In this particular case, our decision falls on a virtual network adapter that goes beyond the simple NAT configuration, so we will proceed to configure our network adapter within VirtualBox settings.
We will select a bridged adapter, choosing the Intel PRO/1000 MT Desktop as our adapter type, which ensures maximum compatibility with Windows Server environments. Since we don't have any network sniffing requirements for this laboratory setup, we will deny promiscuous mode and we will simulate the virtual cable as connected to ensure that the network connection remains active at all times.
Now we will proceed to boot up our server. It is considered best practice that an end device such as a server should have a static IP address, meaning it should not receive its IP configuration from a DHCP server.
From Server Manager we will open Local Server and in the Ethernet section we will be able to modify this configuration.
We will click on the "Ethernet" label which will take us to the Network Connections window. Here we will right-click on our network adapter and select Properties. In the window that opens, we will look for Internet Protocol Version 4 (TCP/IPv4), select it, and click Properties once again.
At this point we will be able to manually configure the static IPv4 address, the subnet mask, and the default gateway according to the existing network configuration and infrastructure requirements. Additionally, DNS server information will be required: in the preferred DNS server field we will enter the loopback address 127.0.0.1, as the server will reference itself for name resolution purposes. We will then save our configuration by clicking OK.
At this point we need to ensure that our laboratory server is capable of resolving common public addresses as well, because at this moment an ICMP request to google.com would fail since our DNS server doesn't know how to resolve external domains. To address this issue, we type DNS Manager in the search bar next to the Start icon or we can select it if we have already added it to the taskbar.
Once DNS Manager is open(we can search is or open it from the task bar if you followed my advice from the lab https://github.com/L301T/Portfolio/tree/main/WindowsServer/install), we right-click on our server name and then select Properties. In the window that appears, we select the Forwarders tab and click Edit to manage forwarding to public DNS servers. Here we can add one or more public DNS servers to which our server will forward queries for domains it cannot resolve on its own. We save our configuration by clicking OK.
Now it's time to verify that everything is functioning correctly through ICMP testing. We will verify connectivity to both local and remote addresses to ensure that DNS resolution and routing are working properly.

Troubleshooting
Common Issues:
DNS resolution fails for external domains:
Verify that forwarders are correctly configured in DNS Manager
Check that the server has internet connectivity (ping 8.8.8.8)
Ensure Windows Firewall is not blocking DNS traffic
Cannot ping gateway:
Verify the default gateway address is correct for your network
Check VirtualBox network adapter configuration
Ensure bridged adapter is using the correct host adapter
DNS service not responding:

Verify DNS Server service is running: Get-Service DNS in PowerShell
Check Event Viewer for DNS-related errors
Restart DNS service if needed: Restart-Service DNS


Conclusion
This laboratory demonstrates the fundamental configuration of a DNS server in a virtual environment.
The server is now capable of resolving both local queries and forwarding external domain queries to public DNS servers.
This setup represents a basic but functional DNS infrastructure suitable for testing and learning environments.
